(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e2489be"],{"0cbf":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.product?e._e():o("el-card",{staticStyle:{"margin-bottom":"10px","border-width":"0px"},attrs:{shadow:"never"}},[o("el-steps",{attrs:{active:0,"align-center":"","finish-status":"success"}},[o("el-step",{attrs:{title:"步骤1",description:"创建产品、定义物模型"}}),o("el-step",{attrs:{title:"步骤2",description:"创建设备，关联产品"}}),o("el-step",{attrs:{title:"步骤3",description:"连接上云、查看实时数据"}})],1)],1),o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"设备类型",prop:"nodeType"}},[o("el-radio-group",{model:{value:e.form.nodeType,callback:function(t){e.$set(e.form,"nodeType",t)},expression:"form.nodeType"}},e._l(e.dict.type.iot_node_type,(function(t){return o("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1),o("el-form-item",{attrs:{label:"产品分类",prop:"category"}},[o("el-select",{attrs:{placeholder:"请选择产品分类"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.dict.type.iot_product_mgr,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),o("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addDict("iot_product_mgr")}}})],1),o("el-form-item",{attrs:{label:"协议标识",prop:"protocol"}},[o("el-select",{attrs:{placeholder:"协议标识"},model:{value:e.form.protocol,callback:function(t){e.$set(e.form,"protocol",t)},expression:"form.protocol"}},e._l(e.dict.type.iot_protocol_id,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),o("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addDict("iot_protocol_id")}}})],1),o("el-form-item",{attrs:{label:"注册类型",prop:"autoRegister"}},[o("el-select",{attrs:{placeholder:"是否自动注册"},model:{value:e.form.autoRegister,callback:function(t){e.$set(e.form,"autoRegister",t)},expression:"form.autoRegister"}},e._l(e.dict.type.iot_auto_register,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"通讯方式",prop:"netType"}},[o("el-select",{attrs:{placeholder:"请选择通讯方式"},model:{value:e.form.netType,callback:function(t){e.$set(e.form,"netType",t)},expression:"form.netType"}},e._l(e.dict.type.iot_net_type,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),o("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addDict("iot_net_type")}}})],1),o("el-form-item",{attrs:{label:"产品图片",prop:"img"}},[o("ImageUpload",{attrs:{limit:1,value:e.form.img},on:{input:e.handleFile}})],1),o("el-form-item",{attrs:{label:"说明链接",prop:"doc"}},[o("el-input",{attrs:{placeholder:"请输入该设备说明文档"},model:{value:e.form.doc,callback:function(t){e.$set(e.form,"doc",t)},expression:"form.doc"}})],1),o("el-form-item",{attrs:{label:"是否禁用",prop:"status"}},[o("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.dict.type.sys_normal_disable,(function(t){return o("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1),o("el-form-item",[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},l=[],a=(o("b0c0"),o("0835")),i=o("84de"),s=o("5a98"),c={name:"ProductEdit",props:{product:{type:Object,default:function(){}}},dicts:["sys_normal_disable","iot_protocol_id","iot_net_type","iot_auto_register","iot_node_type","iot_product_mgr"],components:{InputTableSelect:i["a"],ImageUpload:a["a"]},data:function(){return{form:{status:"0",nodeType:"device"},loading:!1,rules:{name:[{required:!0,message:"产品名称不能为空",trigger:"blur"}],autoRegister:[{required:!0,message:"是否自动注册不能为空",trigger:"blur"}],protocol:[{required:!0,message:"协议标识不能为空",trigger:"blur"}],category:[{required:!0,message:"品类不能为空",trigger:"blur"}],nodeType:[{required:!0,message:"节点类型不能为空",trigger:"blur"}]}}},created:function(){this.product&&(this.form={id:this.product.id,name:this.product.name,nodeType:this.product.nodeType,category:this.product.category,protocol:this.product.protocol,autoRegister:this.product.autoRegister,netType:this.product.netType,doc:this.product.doc,status:this.product.status,img:this.product.img})},methods:{reset:function(){this.form={status:"0",nodeType:"device"}},addDict:function(e){this.$router.push({path:"/system/dict-data/index/"+e})},handleFile:function(e){this.form.img=e},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.product?Object(s["l"])("product",e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.$emit("onUpdate",e.form)})):Object(s["a"])("product",e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.$emit("onCreate",e.form),e.reset()})))}))}}},n=c,u=(o("793c"),o("2877")),p=Object(u["a"])(n,r,l,!1,null,"87ded5be",null);t["default"]=p.exports},"793c":function(e,t,o){"use strict";o("bc63")},bc63:function(e,t,o){}}]);