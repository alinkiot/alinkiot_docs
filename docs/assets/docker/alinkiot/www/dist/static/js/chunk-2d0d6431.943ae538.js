(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6431"],{7299:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.edit?i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:scene:edit"],expression:"['system:scene:edit']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleUpload}},[e.scene_data?i("span",[e._v("编辑")]):i("span",[e._v("上传")])])],1)],1):e._e(),i("el-row",[e.pics.length>0?i("el-carousel",{attrs:{"indicator-position":"outside",height:e.form.height+"px",interval:e.form.interval}},e._l(e.pics,(function(t){return i("el-carousel-item",{key:t},[i("ImagePreview",{attrs:{width:"100%",height:e.form.height,src:t}})],1)})),1):i("el-empty",{attrs:{description:"暂无相册"}})],1),i("el-dialog",{attrs:{title:"上传图片",visible:e.openPicSelector},on:{"update:visible":function(t){e.openPicSelector=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"轮播频率"}},[i("el-input",{model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",e._n(t))},expression:"form.interval"}})],1),i("el-form-item",{attrs:{label:"高度"}},[i("el-input",{model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",e._n(t))},expression:"form.height"}})],1),i("el-form-item",{attrs:{label:"上传相片"}},[i("ImageUpload",{attrs:{limit:10,value:e.pics},on:{input:e.handleFile}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)},a=[],n=(i("b64b"),i("e9c4"),i("5a98")),o=i("0835"),c=i("9a2d"),r={dicts:[],components:{ImageUpload:o["a"],ImagePreview:c["a"]},props:{scene:{type:Object,required:!0},scene_key:{type:String,required:!0},edit:{type:Boolean,default:!1}},data:function(){return{loading:!1,openPicSelector:!1,scene_data:void 0,pics:[],form:{interval:4e3,height:350}}},created:function(){this.getSceneData()},methods:{getSceneData:function(){var e=this,t={scene:this.scene.id,sceneType:this.scene_key};this.loading=!0,this.scene_data=void 0,this.pics=[],this.form={interval:4e3,height:350},Object(n["k"])("scene_view",t).then((function(t){e.loading=!1;var i=t.data;i.length>0&&(e.scene_data=i[0],e.form=JSON.parse(e.scene_data.data),e.pics=e.form.pics)}))},handleUpload:function(){this.openPicSelector=!0},handleFile:function(e){this.form.pics=e.split(",")},submitForm:function(){var e=this;this.openPicSelector=!1;var t=this.form;this.scene_data?(this.scene_data.data=JSON.stringify(t),Object(n["l"])("scene_view",this.scene_data).then((function(t){e.pics=e.form.pics,e.$modal.msgSuccess("修改成功")}))):(this.scene_data={scene:this.scene.id,sceneType:this.scene_key,data:JSON.stringify(t)},Object(n["a"])("scene_view",this.scene_data).then((function(t){e.pics=e.form.pics,e.$modal.msgSuccess("创建成功")})))}},watch:{scene:function(){this.getSceneData()}}},l=r,d=i("2877"),m=Object(d["a"])(l,s,a,!1,null,null,null);t["default"]=m.exports}}]);