(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df9cb69a","chunk-1ac012ea","chunk-5f53121e","chunk-4d2869f2"],{"0ce6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[t.device?i("el-row",{staticClass:"info-box"},[t.product&&t.product.img?i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[i("ImagePreview",{staticStyle:{width:"80%"},attrs:{src:t.product.img}})],1):t._e(),i("el-col",{attrs:{span:18}},[i("el-row",[i("span",{staticClass:"title"},[t._v("设备名称：")]),i("span",{staticClass:"value"},[t._v(t._s(t.device.name))])]),i("el-row",[i("span",{staticClass:"title"},[t._v("设备地址：")]),i("span",{staticClass:"value"},[t._v(t._s(t.device.addr))])]),i("el-row",[i("span",{staticClass:"title"},[t._v("所属产品：")]),i("span",{staticClass:"value"},[t._v(t._s(t.product.name))])]),i("el-row",[t.device.location?i("div",{staticClass:"value"},[i("span",{staticClass:"location"},[i("i",{staticClass:"el-icon-position"}),t._v(t._s(t.device.location)+" ")])]):i("div",{staticClass:"value"},[i("i",{staticClass:"el-icon-location"}),t._v("暂无位置 ")])])],1)],1):t._e(),i("DeviceBoard",{attrs:{devId:t.devId,env:t.env},on:{deviceChange:t.deviceChange}})],1)},n=[],c=i("5f87"),o=i("7a56"),d={name:"board",dicts:[],components:{DeviceBoard:o["default"]},data:function(){return{devId:void 0,device:void 0,product:void 0,token:void 0,env:{width:document.body.clientWidth-20}}},created:function(){document.title="设备实时状态",this.devId=this.$route.query.devId,this.token=this.$route.query.token,this.token&&Object(c["c"])(this.token)},methods:{deviceChange:function(t){this.device=t,this.product=t.product}}},s=d,r=(i("eaec"),i("2877")),u=Object(r["a"])(s,a,n,!1,null,"c6c3f9ba",null);e["default"]=u.exports},"3ea5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"video-container"}}),i("el-row",{staticClass:"thingBox",style:t.style},t._l(t.things,(function(e){return i("el-col",{key:e.name,attrs:{span:12,id:"box_"+e.name}},[i("div",{staticClass:"thing_name"},[i("div",{staticClass:"thing_value",attrs:{id:e.name}},[t._v("--")])]),"alarmType"===e.name?i("div",{staticClass:"update_time",attrs:{id:"update_"+e.name}}):t._e()])})),1)],1)},n=[],c=(i("b64b"),i("4de4"),i("d3b7"),i("b0c0"),i("d81d"),i("c38d")),o=i.n(c),d=i("5a98"),s=i("a6e8"),r=i("5a0c"),u=i.n(r),l={components:{},props:{device:{type:Object},data:{type:Object},env:{type:Object,default:function(){return{}}}},data:function(){return{things:[],width:600,height:400,style:""}},mounted:function(){var t=this,e={addr:this.device.addr};Object(d["c"])(e).then((function(e){var i=e.data;i.config=JSON.parse(i.config),t.createEZPlayer("video-container",t.width,t.height,i)}))},created:function(){this.things=this.device.product.thing,this.env.width&&(this.width=this.env.width,this.height=4*this.env.width/6),this.style="width: "+this.width+"px;"},methods:{createEZPlayer:function(t,e,i,a){var n=a.config.filter((function(t){return"device_serial"===t.name}));new o.a.EZUIKitPlayer({id:t,accessToken:a.accessToken,url:"ezopen://open.ys7.com/"+n[0].value+"/1.hd.live",template:"security",audio:0,width:e,height:i})},formatTitle:function(t,e){if("alarmType"!==t){if("pictureList"===t){var i=JSON.parse(e),a="";return i.map((function(t){a+='<img style="width: 100%; padding:5px;" src="'+t+'"/>'})),a}return e}switch(e){case"motiondetect":return'<i class="el-icon-message-solid"></i>移动侦测';default:return e}},reload:function(){var t=this;this.things.map((function(e){var i=Object(s["d"])(t.data,e.name,"--"),a=document.getElementById(e.name);(i.value||0===i.value)&&(a.innerHTML=t.formatTitle(e.name,i.value));var n=document.getElementById("update_"+e.name);n&&(n.innerText=u()(1e3*i.ts).format("YYYY-MM-DD HH:mm:ss"))}))}},watch:{device:function(){this.things=this.device.product.thing},data:function(){this.reload()}}},v=l,h=(i("e64e"),i("2877")),p=Object(h["a"])(v,a,n,!1,null,"89896212",null);e["default"]=p.exports},"7a56":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("MqttBoard",{attrs:{subscription:t.subscription,publish:t.publish},on:{doMqttMessage:t.doMqttMessage}}),i("DevicePannel",{attrs:{recvData:t.recvData,devId:t.devId,env:t.env,protocol:t.protocol},on:{onload:t.onLoad,send:t.doSend}})],1)},n=[],c=(i("a9e3"),i("e9c4"),i("b64b"),i("fb77")),o=i("d4c0"),d={components:{MqttBoard:c["a"],DevicePannel:o["default"]},props:{devId:{type:[String,Number]},env:{type:Object,default:function(){return{}}}},data:function(){return{device:void 0,product:void 0,subscription:{},publish:{},recvData:void 0,protocol:""}},created:function(){},methods:{doSend:function(t,e){var i={msgType:"control_device",data:{type:"write",addr:this.device.addr,name:t,value:e}};this.publish={topic:"p/in",qos:0,payload:JSON.stringify(i)},this.$modal.msgSuccess("发送成功!")},onLoad:function(t){console.log("this.device",t),this.device=t,this.$emit("deviceChange",this.device),this.product=t.product,this.protocol=this.product.protocol,this.subscription={topic:"p/out/"+t.addr,qos:0}},doMqttMessage:function(t,e){var i=JSON.parse(e);this.recvData=i}}},s=d,r=i("2877"),u=Object(r["a"])(s,a,n,!1,null,"09ef4578",null);e["default"]=u.exports},bf35:function(t,e,i){},d4c0:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.product&&"ezviz"===t.product.category?i("CameraBox",{attrs:{device:t.device,data:t.devData,env:t.env}}):i("DefaultBox",{attrs:{device:t.device,data:t.devData,env:t.env,protocol:t.protocol},on:{sendData:t.sendData}})],1)},n=[],c=(i("a9e3"),i("b64b"),i("5a98")),o=(i("870c"),i("3ea5")),d=i("c7e7"),s={components:{DefaultBox:d["default"],CameraBox:o["default"]},props:{devId:{type:[String,Number]},recvData:{type:Object,default:function(){}},env:{type:Object,default:function(){return{}}},protocol:String},data:function(){return{loading:!1,device:void 0,product:void 0,devData:void 0}},created:function(){this.queryDevice()},methods:{queryDevice:function(){var t=this;this.loading=!0,Object(c["g"])("device",this.devId).then((function(e){var i=e.data,a=i.product;a?(i.product=void 0,Object(c["g"])("product",a).then((function(e){var a=e.data;a.thing?a.thing=JSON.parse(a.thing):a.thing=[],t.product=a,i.product=a,t.device=i,t.loadAfter()}))):(t.device=i,t.loadAfter())}))},loadAfter:function(){var t=this;this.loading=!1,this.$emit("onload",this.device),Object(c["e"])({addr:this.device.addr}).then((function(e){var i={},a=e.data;for(var n in a)i[n]={ts:a.createtime,value:a[n]};t.devData=i}))},sendData:function(t,e){this.$emit("send",t,e)}},watch:{devId:function(){this.queryDevice()},recvData:function(){this.devData=this.recvData}}},r=s,u=i("2877"),l=Object(u["a"])(r,a,n,!1,null,"482d754d",null);e["default"]=l.exports},e64e:function(t,e,i){"use strict";i("bf35")},eaec:function(t,e,i){"use strict";i("f74e")},f74e:function(t,e,i){}}]);