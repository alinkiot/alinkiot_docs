(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13102f5f","chunk-58b9ce20","chunk-3324d0f8","chunk-3258e1b4","chunk-7de1b042","chunk-2d0e5c01","chunk-2d0aa243","chunk-2d2178ad","chunk-2d0bae4a","chunk-2d2082b7","chunk-2d0f043e","chunk-2d0e2697","chunk-2d0c5213"],{"106d":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"Key",prop:"key"}},[i("el-input",{attrs:{placeholder:"请输入高德地图key"},model:{value:e.map.key,callback:function(t){e.$set(e.map,"key",t)},expression:"map.key"}})],1),i("el-form-item",{attrs:{label:"安全密钥",prop:"securityJsCode"}},[i("el-input",{attrs:{placeholder:"请输入安全密钥"},model:{value:e.map.securityJsCode,callback:function(t){e.$set(e.map,"securityJsCode",t)},expression:"map.securityJsCode"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("d81d"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{map:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.map=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.map),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"23bf501c",null);t["default"]=l.exports},"13a2":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ThemeForm",{attrs:{settings:e.settings},on:{change:e.change,save:e.submitForm}})],1)},a=[],r=(i("b64b"),i("aa83")),n=i("83d6"),s=i.n(n),l={components:{ThemeForm:r["a"]},props:{form:{type:Object,require:!0}},data:function(){return{settings:{}}},created:function(){if(this.settings=s.a,void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.settings=e)}},methods:{change:function(e,t){console.log(e,t),this.settings[e]=t},submitForm:function(e){console.log(e),this.form.configValue=e,this.$emit("submit")}}},c=l,f=(i("eb35"),i("2877")),u=Object(f["a"])(c,o,a,!1,null,"8d76faac",null);t["default"]=u.exports},1603:function(e,t,i){},"17e0":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:e.form.configName,prop:"configValue"}},[i("ImageUpload",{attrs:{limit:1,value:e.form.configValue},on:{input:e.handleFile}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=i("0835"),n={components:{ImageUpload:r["a"]},props:{form:{type:Object,require:!0}},data:function(){return{}},created:function(){},methods:{handleFile:function(e){this.form.configValue=e},submitForm:function(){this.form.configName="",this.$emit("submit")}}},s=n,l=(i("8a9e"),i("2877")),c=Object(l["a"])(s,o,a,!1,null,"4fc6b62a",null);t["default"]=c.exports},"38c2":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"Host",prop:"host"}},[i("el-input",{attrs:{placeholder:"请输入连接地址"},model:{value:e.config.host,callback:function(t){e.$set(e.config,"host",t)},expression:"config.host"}})],1),i("el-form-item",{attrs:{label:"Port",prop:"port"}},[i("el-input-number",{attrs:{placeholder:"请输入连接端口"},model:{value:e.config.port,callback:function(t){e.$set(e.config,"port",t)},expression:"config.port"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.config.password,callback:function(t){e.$set(e.config,"password",t)},expression:"config.password"}})],1),i("el-form-item",{attrs:{label:"数据库",prop:"database"}},[i("el-input-number",{attrs:{placeholder:"请输入数据库名"},model:{value:e.config.database,callback:function(t){e.$set(e.config,"database",t)},expression:"config.database"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{config:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.config=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.config),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"fedc5dc8",null);t["default"]=l.exports},"3e7b":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[i("el-input",{attrs:{placeholder:"请输入应用ID"},model:{value:e.wxMini.appid,callback:function(t){e.$set(e.wxMini,"appid",t)},expression:"wxMini.appid"}})],1),i("el-form-item",{attrs:{label:"AppSecret",prop:"app_secret"}},[i("el-input",{attrs:{placeholder:"请输入应用密钥"},model:{value:e.wxMini.app_secret,callback:function(t){e.$set(e.wxMini,"app_secret",t)},expression:"wxMini.app_secret"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{wxMini:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.wxMini=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.wxMini),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"df00b9dc",null);t["default"]=l.exports},"3fbc":function(e,t,i){"use strict";i("57be")},"483e":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("MenuForm",{attrs:{menu:e.menu},on:{submit:e.submitForm}})},a=[],r=(i("b64b"),i("e9c4"),i("d52e")),n={components:{MenuForm:r["default"]},props:{form:{type:Object,require:!0}},data:function(){return{menu:void 0}},created:function(){void 0!==this.form.configValue&&""!==this.form.configValue&&(this.menu=JSON.parse(this.form.configValue))},methods:{submitForm:function(e){this.form.configValue=JSON.stringify(e),this.$emit("submit")}}},s=n,l=(i("3fbc"),i("2877")),c=Object(l["a"])(s,o,a,!1,null,"0d04f104",null);t["default"]=c.exports},"54ca":function(e,t,i){"use strict";i("d075")},"57be":function(e,t,i){},"7f1c":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"AppID",prop:"AppID"}},[i("el-input",{attrs:{placeholder:"请输入应用ID"},model:{value:e.wechat.appid,callback:function(t){e.$set(e.wechat,"appid",t)},expression:"wechat.appid"}})],1),i("el-form-item",{attrs:{label:"AppSecret",prop:"AppSecret"}},[i("el-input",{attrs:{placeholder:"请输入应用密钥"},model:{value:e.wechat.secret,callback:function(t){e.$set(e.wechat,"secret",t)},expression:"wechat.secret"}})],1),i("el-form-item",{attrs:{label:"微信通知模板",prop:"notice_template_id"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"登录通知模板。",placement:"bottom"}},[i("el-input",{attrs:{placeholder:"请输入模板ID","suffix-icon":"el-icon-question"},model:{value:e.wechat.notice_tpl_id,callback:function(t){e.$set(e.wechat,"notice_tpl_id",t)},expression:"wechat.notice_tpl_id"}})],1)],1),i("el-form-item",{attrs:{label:"微信告警模板",prop:"alert_tpl_id"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"微信告警模板。",placement:"bottom"}},[i("el-input",{attrs:{placeholder:"请输入模板ID","suffix-icon":"el-icon-question"},model:{value:e.wechat.alert_tpl_id,callback:function(t){e.$set(e.wechat,"alert_tpl_id",t)},expression:"wechat.alert_tpl_id"}})],1)],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{wechat:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.wechat=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.wechat),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"14fa3c7d",null);t["default"]=l.exports},"8a9e":function(e,t,i){"use strict";i("dd8e")},"968f":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isCreate?[i("el-form-item",{attrs:{label:"参数键名",prop:"configKey"}},[i("el-autocomplete",{staticStyle:{display:"block"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入参数键名"},on:{change:e.onChange,select:e.handleSelectKey},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[i("div",{staticClass:"name"},[e._v(e._s(o.label))])]}}],null,!1,1223068852),model:{value:e.form.configKey,callback:function(t){e.$set(e.form,"configKey",t)},expression:"form.configKey"}})],1),e.dict?i("el-form-item",{attrs:{label:"参数类型"}},[i("el-tooltip",{attrs:{effect:"dark",content:e.dict.remark,placement:"top"}},[i("el-button",{attrs:{type:"text"}},[e._v(" "+e._s(e.dict.dictLabel)+" "),i("i",{staticClass:"el-icon-question"})])],1)],1):e._e(),i("el-form-item",{attrs:{label:"参数名称",prop:"configName"}},[i("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.form.configName,callback:function(t){e.$set(e.form,"configName",t)},expression:"form.configName"}})],1),i("el-form-item",{attrs:{label:"参数说明",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入参数说明"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)]:[i("el-form-item",{attrs:{label:"参数名称"}},[i("el-tooltip",{attrs:{effect:"dark",content:e.getTips(),placement:"top"}},[i("el-button",{attrs:{type:"text"}},[e._v(" "+e._s(e.form.configName)+" "),i("i",{staticClass:"el-icon-question"})])],1),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return e.handleEdit(t)}}},[i("i",{staticClass:"el-icon-edit-outline"})])],1)]],2)},a=[],r=(i("4de4"),i("d3b7"),i("d81d"),{components:{},props:{form:{type:Object,require:!0},isCreate:{type:Boolean,default:!1}},computed:{sysConfigs:function(){var e=this.$store.state.dict.dict.filter((function(e){return"iot_sys_config"===e.key}));if(e.length>0){var t=e[0].value,i=[];return t.map((function(e){i.push({label:e.dictLabel,value:e.dictValue,dict:e})})),i}return[]}},data:function(){return{dict:void 0}},created:function(){},methods:{getTips:function(){var e=this.dict?this.dict.remark:"无";return this.form.remark?this.form.remark:e},handleEdit:function(){this.$emit("edit")},querySearch:function(e,t){var i=this.sysConfigs;t(i)},onChange:function(e){this.findDict(e),this.dict&&(this.form.configName=this.dict.dictLabel),this.form.remark=""},findDict:function(e){if(this.dict=void 0,this.form.configKey){var t=this.sysConfigs.filter((function(t){return t.value===e}));t.length>0&&(this.dict=t[0].dict)}},handleSelectKey:function(e){this.dict=e.dict,this.form.configKey=this.dict.dictValue,this.form.configName=this.dict.dictLabel,this.form.remark=""}},watch:{form:{deep:!0,immediate:!0,handler:function(e){this.findDict(this.form.configKey)}}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"2fb4869e",null);t["default"]=l.exports},"9c42":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"Host",prop:"host"}},[i("el-input",{attrs:{placeholder:"请输入连接地址"},model:{value:e.config.host,callback:function(t){e.$set(e.config,"host",t)},expression:"config.host"}})],1),i("el-form-item",{attrs:{label:"Port",prop:"port"}},[i("el-input-number",{attrs:{type:"number",placeholder:"请输入连接端口"},model:{value:e.config.port,callback:function(t){e.$set(e.config,"port",t)},expression:"config.port"}})],1),i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.config.username,callback:function(t){e.$set(e.config,"username",t)},expression:"config.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.config.password,callback:function(t){e.$set(e.config,"password",t)},expression:"config.password"}})],1),i("el-form-item",{attrs:{label:"数据库",prop:"database"}},[i("el-input",{attrs:{placeholder:"请输入数据库名"},model:{value:e.config.database,callback:function(t){e.$set(e.config,"database",t)},expression:"config.database"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{config:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.config=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.config),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"4fdc4300",null);t["default"]=l.exports},a43a:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"AppID",prop:"AppID"}},[i("el-input",{attrs:{placeholder:"请输入应用ID"},model:{value:e.sms.appid,callback:function(t){e.$set(e.sms,"appid",t)},expression:"sms.appid"}})],1),i("el-form-item",{attrs:{label:"AppKey",prop:"AppKey"}},[i("el-input",{attrs:{placeholder:"请输入应用密钥"},model:{value:e.sms.appkey,callback:function(t){e.$set(e.sms,"appkey",t)},expression:"sms.appkey"}})],1),i("el-form-item",{attrs:{label:"签名",prop:"Sign"}},[i("el-input",{attrs:{placeholder:"请输入签名"},model:{value:e.sms.sign,callback:function(t){e.$set(e.sms,"sign",t)},expression:"sms.sign"}})],1),i("el-form-item",{attrs:{label:"验证码模板ID",prop:"verify_tpl_id"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"模板内容：您的验证码为{1}，请于{2}分钟内填写，如非本人操作，请忽略本短信。",placement:"bottom"}},[i("el-input",{attrs:{placeholder:"请输入模板ID","suffix-icon":"el-icon-question"},model:{value:e.sms.verify_tpl_id,callback:function(t){e.$set(e.sms,"verify_tpl_id",t)},expression:"sms.verify_tpl_id"}})],1)],1),i("el-form-item",{attrs:{label:"告警模板ID",prop:"alert_tpl_id"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"模板内容：您的设备{1}出现故障,故障等级:{2},设备状态:{3},位置:{4}。",placement:"bottom"}},[i("el-input",{attrs:{placeholder:"请输入模板ID","suffix-icon":"el-icon-question"},model:{value:e.sms.alert_tpl_id,callback:function(t){e.$set(e.sms,"alert_tpl_id",t)},expression:"sms.alert_tpl_id"}})],1)],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{sms:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.sms=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.sms),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"051d3444",null);t["default"]=l.exports},b3f7:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"站点名称:",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入站点名称"},model:{value:e.site.site_title,callback:function(t){e.$set(e.site,"site_title",t)},expression:"site.site_title"}})],1),i("el-form-item",{attrs:{label:"Logo:",prop:"logo"}},[i("ImageUpload",{attrs:{limit:1,value:e.site.logo},on:{input:e.handleLogoFile}})],1),i("el-form-item",{attrs:{label:"开启注册:",prop:"isRegister"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.site.isRegister,callback:function(t){e.$set(e.site,"isRegister",t)},expression:"site.isRegister"}})],1),i("el-form-item",{attrs:{label:"开启验证码:",prop:"captchaEnabled"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.site.captchaEnabled,callback:function(t){e.$set(e.site,"captchaEnabled",t)},expression:"site.captchaEnabled"}})],1),i("el-form-item",{attrs:{label:"登录方式:",prop:"loginTypes"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.site.loginTypes,callback:function(t){e.$set(e.site,"loginTypes",t)},expression:"site.loginTypes"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"背景图:",prop:"background"}},[i("ImageUpload",{attrs:{limit:1,value:e.site.background},on:{input:e.handleFile}})],1),i("InputTableSelect",{attrs:{label:"默认主题",showColumn:"configName",queryId:e.site.theme,queryParams:e.query,table:"config",prop:"theme"},on:{selectDone:e.selectThemeDone}}),i("el-form-item",{attrs:{label:"版权信息:",prop:"copyright"}},[i("el-input",{attrs:{placeholder:"请输入版权信息"},model:{value:e.site.copyright,callback:function(t){e.$set(e.site,"copyright",t)},expression:"site.copyright"}})],1),i("el-form-item",{attrs:{label:"帮助链接:",prop:"site_help"}},[i("el-input",{attrs:{placeholder:"请输入帮助链接"},model:{value:e.site.site_help,callback:function(t){e.$set(e.site,"site_help",t)},expression:"site.site_help"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b0c0"),i("b64b"),i("e9c4"),i("84de")),n={components:{InputTableSelect:r["a"]},props:{form:{type:Object,require:!0},project:{type:Object,default:function(){return{}}}},data:function(){return{query:{configKey:"layout_setting",project:this.project.name},options:[{label:"帐号登录",value:"username_login"},{label:"手机号登录",value:"phone_login"},{label:"微信登录",value:"wechat_login"}],site:{loginTypes:["username_login"],isRegister:!1,captchaEnabled:!1,copyright:"",background:""}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.site=e)}},methods:{selectThemeDone:function(e){console.log(e),this.site.theme=e.configId},handleLogoFile:function(e){this.site.logo=e},handleFile:function(e){this.site.background=e},submitForm:function(){this.form.configValue=JSON.stringify(this.site),this.$emit("submit")}}},s=n,l=(i("54ca"),i("2877")),c=Object(l["a"])(s,o,a,!1,null,"dff6f0bc",null);t["default"]=c.exports},c6bf:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{attrs:{label:"Host",prop:"host"}},[i("el-input",{attrs:{placeholder:"请输入连接地址"},model:{value:e.config.host,callback:function(t){e.$set(e.config,"host",t)},expression:"config.host"}})],1),i("el-form-item",{attrs:{label:"Port",prop:"port"}},[i("el-input-number",{attrs:{placeholder:"请输入连接端口"},model:{value:e.config.port,callback:function(t){e.$set(e.config,"port",t)},expression:"config.port"}})],1),i("el-form-item",{attrs:{label:"用户名",prop:"user"}},[i("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.config.user,callback:function(t){e.$set(e.config,"user",t)},expression:"config.user"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.config.password,callback:function(t){e.$set(e.config,"password",t)},expression:"config.password"}})],1),i("el-form-item",{attrs:{label:"数据库",prop:"db"}},[i("el-input",{attrs:{placeholder:"请输入数据库名"},model:{value:e.config.db,callback:function(t){e.$set(e.config,"db",t)},expression:"config.db"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},a=[],r=(i("b64b"),i("e9c4"),{components:{},props:{form:{type:Object,require:!0}},data:function(){return{config:{}}},created:function(){if(void 0!==this.form.configValue&&""!==this.form.configValue){var e=JSON.parse(this.form.configValue);e&&(this.config=e)}},methods:{submitForm:function(){this.form.configValue=JSON.stringify(this.config),this.$emit("submit")}}}),n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,"7323c148",null);t["default"]=l.exports},cdb7:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[i("InputTableSelect",{staticStyle:{display:"inline-block"},attrs:{prop:"project",showColumn:"title",label:"所属项目",table:"project",queryId:e.queryId,read:void 0!==e.queryId},on:{selectDone:e.selectProjectDone}}),i("el-form-item",{attrs:{label:"参数名称"}},[i("el-select",{attrs:{clearable:""},on:{change:e.handleQuery},model:{value:e.queryParams.configKey,callback:function(t){e.$set(e.queryParams,"configKey",t)},expression:"queryParams.configKey"}},e._l(e.dict.type.iot_sys_config,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-row",{staticClass:"mb8",attrs:{gutter:10}},[i("el-col",{attrs:{span:1.5}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.project?"新增配置":"选择项目后可以新增",placement:"bottom"}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:add"],expression:"['system:config:add']"}],attrs:{disabled:!e.project,type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),i("el-col",{attrs:{span:1.5}},[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleRefreshCache}},[e._v("刷新缓存")])],1),i("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.configList},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),i("el-table-column",{attrs:{label:"参数键名",align:"center",prop:"configKey"}}),i("el-table-column",{attrs:{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"参数类型",align:"center",prop:"configType"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",[e._v(e._s(e.getCfgType(t.row.configKey)))])]}}])}),i("el-table-column",{attrs:{label:"项目标识",align:"center",prop:"project"}}),i("el-table-column",{attrs:{label:"参数说明",prop:"remark","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"前端返回",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":"Y","inactive-value":"N"},on:{change:function(i){return e.handleStatusChange(t.row)}},model:{value:t.row.configType,callback:function(i){e.$set(t.row,"configType",i)},expression:"scope.row.configType"}})]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:query"],expression:"['system:config:query']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit-outline"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v("详情")]),i("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),i("el-dialog",{attrs:{title:"编辑参数",visible:e.openEdit,width:"450px"},on:{"update:visible":function(t){e.openEdit=t}}},[i("el-form",{ref:"formDict",attrs:{model:e.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"参数类型"}},[e.form&&e.form.configKey?i("el-tag",[e._v(e._s(e.getCfgType(e.form.configKey)))]):e._e()],1),i("el-form-item",{attrs:{label:"参数名称",prop:"configName"}},[i("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.form.configName,callback:function(t){e.$set(e.form,"configName",t)},expression:"form.configName"}})],1),i("el-form-item",{attrs:{label:"参数说明",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入参数说明"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保存")])],1)],1),i("el-drawer",{attrs:{direction:"rtl",title:e.title,visible:e.open,size:"550px"},on:{"update:visible":function(t){e.open=t}}},[i("el-form",{ref:"form",staticStyle:{padding:"20px"},attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[i("CommForm",{attrs:{form:e.form,isCreate:e.isCreate},on:{edit:function(t){e.openEdit=!0}}}),"wechat"===e.form.configKey?i("WxDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"sms"===e.form.configKey?i("SmsDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"map"===e.form.configKey?i("MapDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"wechat_mini"===e.form.configKey?i("WxMiniDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"site_info"===e.form.configKey?i("SiteInfoDialog",{attrs:{form:e.form,project:e.project},on:{submit:e.submitForm}}):"tdengine"===e.form.configKey?i("TdengineDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"redis"===e.form.configKey?i("RedisDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"menu"===e.form.configKey?i("MenuDlg",{attrs:{form:e.form},on:{submit:e.submitForm}}):"layout_setting"===e.form.configKey?i("ThemeDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):"mysql"===e.form.configKey?i("MysqlDialog",{attrs:{form:e.form},on:{submit:e.submitForm}}):[i("el-form-item",{attrs:{label:"参数键值",prop:"configValue"}},[i("el-input",{attrs:{placeholder:"请输入参数键值"},model:{value:e.form.configValue,callback:function(t){e.$set(e.form,"configValue",t)},expression:"form.configValue"}})],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),i("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")])],1)]],2)],1)],1)},a=[],r=(i("4de4"),i("d3b7"),i("b0c0"),i("d81d"),i("c0c3")),n=i("17e0"),s=i("7f1c"),l=i("106d"),c=i("a43a"),f=i("b3f7"),u=i("9a2d"),m=i("3e7b"),p=i("9c42"),d=i("38c2"),h=i("84de"),g=i("483e"),b=i("968f"),v=i("13a2"),y=i("c6bf"),_={name:"Config",dicts:["sys_yes_no","iot_sys_config"],components:{ThemeDialog:v["default"],InputTableSelect:h["a"],ImageDialog:n["default"],WxDialog:s["default"],SmsDialog:c["default"],SiteInfoDialog:f["default"],ImagePreview:u["a"],MapDialog:l["default"],WxMiniDialog:m["default"],TdengineDialog:p["default"],RedisDialog:d["default"],MenuDlg:g["default"],CommForm:b["default"],MysqlDialog:y["default"]},data:function(){return{loading:!1,queryId:void 0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,configList:[],open:!1,queryParams:{pageNum:1,pageSize:10,configKey:void 0,project:void 0},project:void 0,projects:[],isCreate:!0,form:{},openEdit:!1,rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}]}}},computed:{title:function(){var e=this.form.configKey;if(e){var t=this.dict.type.iot_sys_config,i=t.filter((function(t){return t.value===e}));return i.length>0?i[0].label:"创建参数"}return"创建参数"}},created:function(){this.reset();var e=this.$route.query.configKey;e&&(this.queryParams.configKey=e),this.queryId=this.$route.query.projectId,this.queryId||this.getList()},methods:{getCfgType:function(e){var t=this.dict.type.iot_sys_config,i=t.filter((function(t){return t.value===e}));return i.length>0?i[0].label:"自定义参数"},selectProjectDone:function(e){this.project=e||void 0,this.handleQuery()},getList:function(){var e=this;this.loading=!0;var t={pageNum:this.queryParams.pageNum,pageSize:this.queryParams.pageSize,configKey:this.queryParams.configKey};this.project&&(t.project=this.project.name),Object(r["e"])(this.addDateRange(t,this.dateRange)).then((function(t){e.configList=t.rows,e.total=t.total,e.loading=!1}))},handleStatusChange:function(e){var t=this,i={configId:e.configId,configType:e.configType};Object(r["g"])(i).then((function(e){t.$modal.msgSuccess("修改成功")}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={configId:void 0,configName:void 0,configKey:void 0,configValue:"",configType:"Y",remark:""},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleAdd:function(){this.reset(),this.queryParams.configKey&&(this.form.configKey=this.queryParams.configKey),this.isCreate=!0,this.open=!0},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.configId})),this.single=1!==e.length,this.multiple=!e.length},handleUpdate:function(e){var t=this;this.reset(),this.isCreate=!1;var i=e.configId;Object(r["c"])(i).then((function(e){t.form=e.data,t.open=!0}))},handleEdit:function(){this.openEdit=!1,console.log(this.form),this.submitForm()},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t)if(e.isCreate){var i=e.form;i.project=e.project.name,Object(r["a"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()}))}else Object(r["g"])(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()}))}))},handleDelete:function(e){var t=this,i=e.configId||this.ids;this.$modal.confirm('是否确认删除参数编号为"'+i+'"的数据项？').then((function(){return Object(r["b"])(i)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleRefreshCache:function(){var e=this;Object(r["f"])().then((function(){e.$modal.msgSuccess("刷新成功")}))}}},k=_,x=i("2877"),w=Object(x["a"])(k,o,a,!1,null,"a2933a0a",null);t["default"]=w.exports},d075:function(e,t,i){},dd8e:function(e,t,i){},eb35:function(e,t,i){"use strict";i("1603")}}]);