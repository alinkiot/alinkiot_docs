(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3365a04"],{"040b":function(t,e,a){},"07ab":function(t,e,a){"use strict";a("040b")},4403:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("当前节点：")]),a("el-select",{attrs:{placeholder:"请选择节点"},on:{change:t.changeNode},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},t._l(t.brokers,(function(t){return a("el-option",{key:t.node,attrs:{label:t.node,value:t.node}})})),1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"broker-box"},[a("h4",[t._v("节点名称")]),a("span",{class:t.broker.node_status},[t._v(t._s(t.broker.node))])])])],1),a("el-col",{staticClass:"broker-box",attrs:{span:6}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"broker-box"},[a("h4",[t._v("版本")]),a("span",[t._v(t._s(t.broker.version))])])])],1),a("el-col",{staticClass:"broker-box",attrs:{span:6}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"broker-box"},[a("h4",[t._v("运行时间")]),a("span",[t._v(t._s(t.broker.datetime))])])])],1),a("el-col",{staticClass:"broker-box",attrs:{span:6}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"broker-box"},[a("h4",[t._v("系统时间")]),a("span",[t._v(t._s(t.broker.uptime))])])])],1)],1),a("el-row",[a("h4",[t._v("节点信息("+t._s(t.nodes.length)+")")]),a("el-table",{attrs:{data:t.nodes}},[a("el-table-column",{attrs:{label:"节点",prop:"node",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"Erlang/OTP版本",prop:"otp_release",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{align:"center",label:"Erlang进程"}},[a("el-table-column",{attrs:{prop:"process_used",formatter:t.formatRow,align:"center",label:"(used/avaliable)"}})],1),a("el-table-column",{attrs:{align:"center",label:"CPU"}},[a("el-table-column",{attrs:{prop:"cpu",align:"center",formatter:t.formatRow,label:"(load1/load5/load15)"}})],1),a("el-table-column",{attrs:{align:"center",label:"内存"}},[a("el-table-column",{attrs:{align:"center",prop:"memory",formatter:t.formatRow,label:"(use/total)"}})],1),a("el-table-column",{attrs:{label:"最大句柄",prop:"max_fds",align:"center"}}),a("el-table-column",{attrs:{label:"状态",prop:"node_status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["Running"===e.row.node_status?a("el-tag",{attrs:{type:"success"}},[t._v("在线")]):a("el-tag",[t._v("离线")])]}}])})],1)],1),a("el-row",[a("h4",[t._v("状态统计("+t._s(t.stats.length)+")")]),a("el-table",{attrs:{data:t.stats}},[a("el-table-column",{attrs:{label:"节点",prop:"node",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"连接数",prop:"connections",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"主题数",prop:"topics",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"保留消息数",prop:"retained",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"会话数",prop:"sessions",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"订阅数",prop:"suboptions",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"共享订阅数",prop:"sub_shared",align:"center",formatter:t.formatRow}})],1)],1),a("el-row",[a("h4",[t._v("监听端口")]),a("el-table",{attrs:{data:t.listens}},[a("el-table-column",{attrs:{label:"侦听端口",prop:"listen_on",align:"left",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"协议",prop:"protocol",align:"left",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"当前连接数",prop:"current_conns",align:"center",formatter:t.formatRow}}),a("el-table-column",{attrs:{label:"最大连接数",prop:"max_conns",align:"center",formatter:t.formatRow}})],1)],1)],1)},o=[],n=(a("b680"),a("b0c0"),a("4de4"),a("d3b7"),a("955b")),s={name:"Dashboard",data:function(){return{loading:!1,broker:{},brokers:[],name:void 0,nodes:[],stats:[],listens:[]}},created:function(){this.getNodeList(),this.getBrokers(),this.getStats()},methods:{formatRow:function(t,e){switch(e.property){case"process_used":return t[e.property]+"/"+t["process_available"];case"cpu":return t["load1"]+"/"+t["load5"]+"/"+t["load15"];case"memory":var a=t["memory_used"]/1024/1024,r=t["memory_total"]/1024/1024;return a.toFixed(2)+"M/"+r.toFixed(2)+"M";case"connections":return t["connections.count"]+"/"+t["connections.max"];case"topics":return t["topics.count"]+"/"+t["topics.max"];case"retained":return t["retained.count"]+"/"+t["retained.max"];case"sessions":return t["sessions.count"]+"/"+t["sessions.max"];case"suboptions":return t["suboptions.count"]+"/"+t["suboptions.max"];case"sub_shared":return t["subscriptions.shared.count"]+"/"+t["subscriptions.shared.max"];default:return t[e.property]}},getNodeList:function(){var t=this;Object(n["e"])().then((function(e){t.nodes=e.data}))},getBrokers:function(){var t=this;Object(n["b"])().then((function(e){t.brokers=e.data,t.name=t.brokers[0].node,t.changeNode()}))},getStats:function(){var t=this;Object(n["f"])().then((function(e){t.stats=e.data}))},getListens:function(){var t=this;Object(n["d"])({node:this.name}).then((function(e){t.listens=e.data}))},changeNode:function(){var t=this,e=this.brokers.filter((function(e){return e.node===t.name}));e.length>0&&(this.broker=e[0]);var a=this.nodes.filter((function(e){return e.node===t.name}));a.length>0&&(this.node=a[0]),this.getListens()}}},l=s,c=(a("07ab"),a("2877")),i=Object(c["a"])(l,r,o,!1,null,"e39afca2",null);e["default"]=i.exports},"955b":function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return i}));var r=a("b775");function o(t){return Object(r["a"])({url:"/nodes",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/brokers",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/stats",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/listeners",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/system/metrics/device",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/system/metrics/alarm",method:"get",params:t})}}}]);