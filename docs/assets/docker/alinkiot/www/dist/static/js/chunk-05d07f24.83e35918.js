(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d07f24","chunk-05d07f24","chunk-6ee373bc","chunk-e5501ff4","chunk-27673cab"],{"10e4":function(t,e,n){},"27de":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"protocol-btn"},[n("el-button-group"),n("el-drawer",{attrs:{title:"远程配置",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e},"before-close":t.handlerClose}},[n("div",{staticClass:"protocol-content"},[n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("读取配置")]),n("div",{staticClass:"protocol-content-box"},[n("div",{staticClass:"protocol-content-box-form"},[n("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"100px",size:"mini"}},[t._l(t.dynamicValidateForm.RS485,(function(e,a){return n("div",{key:e.key},[n("el-card",[n("div",{staticClass:"demo-dynamic-title",attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s("配置"+(a+1))+" ")]),n("el-form-item",{attrs:{label:"丛机地址:",prop:"RS485."+a+".adress",rules:{required:!0,message:"丛机地址",trigger:"blur"}}},[n("el-input-number",{attrs:{min:1,max:254},model:{value:e.adress,callback:function(n){t.$set(e,"adress",n)},expression:"domain.adress"}})],1),n("el-form-item",{attrs:{label:"波特率:",prop:"RS485."+a+".BaudRate",rules:{required:!0,message:"波特率不能为空",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择波特率"},model:{value:e.BaudRate,callback:function(n){t.$set(e,"BaudRate",n)},expression:"domain.BaudRate"}},[n("el-option",{attrs:{label:"2400",value:"2400"}}),n("el-option",{attrs:{label:"4800",value:"4800"}}),n("el-option",{attrs:{label:"9600",value:"9600"}}),n("el-option",{attrs:{label:"19200",value:"19200"}}),n("el-option",{attrs:{label:"38400",value:"38400"}}),n("el-option",{attrs:{label:"115200",value:"115200"}})],1)],1),n("el-form-item",{attrs:{label:"功能码:",prop:"RS485."+a+".Feature",rules:{required:!0,message:"功能码",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择功能码"},model:{value:e.Feature,callback:function(n){t.$set(e,"Feature",n)},expression:"domain.Feature"}},[n("el-option",{attrs:{label:"3",value:"3"}}),n("el-option",{attrs:{label:"4",value:"4"}})],1)],1),n("el-form-item",{attrs:{label:"起始寄存器:",prop:"RS485."+a+".startReg",rules:{required:!0,message:"起始寄存器",trigger:"blur"}}},[n("el-input-number",{attrs:{min:0,max:255},model:{value:e.startReg,callback:function(n){t.$set(e,"startReg",n)},expression:"domain.startReg"}})],1),n("el-form-item",{attrs:{label:"寄存器数量:",prop:"RS485."+a+".numReg",rules:{required:!0,message:"寄存器数量",trigger:"blur"}}},[n("el-input-number",{attrs:{min:1,max:50},model:{value:e.numReg,callback:function(n){t.$set(e,"numReg",n)},expression:"domain.numReg"}})],1),n("el-button",{staticClass:"delete-button",attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removeDomain(e)}}},[t._v("删除")])],1)],1)})),n("div",{staticClass:"demo-dynamic-operator"}),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("dynamicValidateForm")}}},[t._v("提交")]),n("el-button",{attrs:{type:"primary"},on:{click:t.addDomain}},[t._v("新增配置")]),n("el-button",{on:{click:function(e){return t.resetForm("dynamicValidateForm")}}},[t._v("重置")])],1)],2)],1)])],1)])],1)},i=[],o=(n("a434"),{name:"ProtocolBtn",props:{protocol:{typeof:String,default:""}},data:function(){return{drawer:!1,dynamicValidateForm:{RS485:[{BaudRate:"",adress:"",Feature:"",startReg:"",numReg:""}]}}},components:{},computed:{},mounted:function(){},methods:{changeDrawer:function(){console.log(this.protocol),this.drawer=!0},handlerClose:function(){this.drawer=!1},submitForm:function(t){this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm:function(t){this.$refs[t].resetFields()},removeDomain:function(t){var e=this.dynamicValidateForm.RS485.indexOf(t);-1!==e&&this.dynamicValidateForm.RS485.splice(e,1)},addDomain:function(){this.dynamicValidateForm.RS485.push({BaudRate:"",adress:"",Feature:"",startReg:"",numReg:"",key:Date.now()})}}}),s=o,r=(n("a3a5"),n("3a8f"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"9767b6ee",null);e["default"]=l.exports},"3a8f":function(t,e,n){"use strict";n("4fb8")},"3d8b":function(t,e,n){},"4fb8":function(t,e,n){},8487:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"btn-tool",attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:function(e){return t.start("h2000")}}},[t._v("启动 ")]),n("el-button",{staticClass:"btn-tool",attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:function(e){return t.stop("h2000")}}},[t._v("停止 ")]),n("el-button",{staticClass:"btn-tool",attrs:{size:"mini",type:"warning",icon:"el-icon-warning"},on:{click:function(e){return t.reset("h2000")}}},[t._v("复位 ")]),n("el-button",{staticClass:"btn-tool",attrs:{size:"mini",type:"primary",icon:"el-icon-s-tools"},on:{click:function(e){return t.openDialog("h1001")}}},[t._v("设置频率 ")]),n("el-dialog",{attrs:{title:"命令下发",visible:t.openSendDialog},on:{"update:visible":function(e){t.openSendDialog=e}}},[n("el-form",{ref:"sendForm",attrs:{model:t.cThing,"label-position":"top"}},[n("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"设置频率",prop:"value"}},[n("el-input-number",{staticStyle:{width:"80%","margin-left":"5px"},attrs:{precision:2,min:0,max:50,placeholder:"请输入频率"},model:{value:t.cThing.value,callback:function(e){t.$set(t.cThing,"value",e)},expression:"cThing.value"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{icon:"el-icon-position",size:"small",type:"primary"},on:{click:t.sendData}},[t._v("发送")])],1)],1)],1)},i=[],o={components:{},props:{device:{type:Object}},data:function(){return{cThing:{},things:[],openSendDialog:!1}},created:function(){},methods:{start:function(){this.$emit("sendData","h2000",1)},reset:function(){this.$emit("sendData","h2000",7)},stop:function(){this.$emit("sendData","h2000",6)},openDialog:function(){this.openSendDialog=!0},sendData:function(){var t=this;this.$refs["sendForm"].validate((function(e){t.$emit("sendData","h1000",200*t.cThing.value),t.openSendDialog=!1}))}},watch:{device:function(){this.things=this.device.product.thing}}},s=o,r=(n("b66e"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"32c669bf",null);e["default"]=l.exports},"89fc":function(t,e,n){},"8bdb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.things.length>0?n("div",{staticStyle:{"margin-bottom":"5px"}},[n("el-button-group",t._l(t.things,(function(e){return n("el-button",{key:e.name,attrs:{size:"mini",type:"primary",icon:"el-icon-s-tools"},on:{click:function(n){return t.openDialog(e)}}},[t._v(" "+t._s(e.title)+" ")])})),1),n("el-dialog",{attrs:{title:"命令下发",visible:t.openSendDialog},on:{"update:visible":function(e){t.openSendDialog=e}}},[n("el-form",{ref:"sendForm",attrs:{model:t.cThing,rules:t.rules,"label-width":"100px","label-position":"top"}},[n("el-form-item",{attrs:{label:t.cThing.title,prop:"value"}},[n("el-checkbox",{model:{value:t.checkedHex,callback:function(e){t.checkedHex=e},expression:"checkedHex"}},[t._v("Hex")]),n("el-input",{staticStyle:{width:"80%","margin-left":"5px"},attrs:{placeholder:"请输入值"},model:{value:t.cThing.value,callback:function(e){t.$set(t.cThing,"value",e)},expression:"cThing.value"}})],1),n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-position",size:"mini",type:"primary"},on:{click:t.sendData}},[t._v("发送")])],1)],1)],1)],1):t._e()},i=[],o=(n("b0c0"),n("4de4"),n("d3b7"),{components:{},props:{device:{type:Object}},data:function(){return{cThing:{},things:[],openSendDialog:!1,checkedHex:!1,rules:{value:[{required:!0,message:"下发内容不能为空",trigger:"blur"}]}}},created:function(){},methods:{openDialog:function(t){this.cThing=t,this.openSendDialog=!0},sendData:function(){var t=this;this.$refs["sendForm"].validate((function(e){if(e){var n=t.cThing.value;"integer"===t.cThing.type?n=t.checkedHex?parseInt(n,16):parseInt(n):"float"===t.cThing.type&&(n=parseFloat(n)),t.$emit("sendData",t.cThing.name,n),t.openSendDialog=!1}}))}},watch:{device:function(){var t=this.device.product.thing;this.things=t.filter((function(t){return"rw"===t.access||"write"===t.access}))}}}),s=o,r=(n("d5c6"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"71d056de",null);e["default"]=l.exports},a3a5:function(t,e,n){"use strict";n("89fc")},a855:function(t,e,n){"use strict";n("e6fa")},b66e:function(t,e,n){"use strict";n("3d8b")},c7e7:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thing-box"},[n("div",{staticClass:"thing-box-btn"},[n("BpqBtnBox",{directives:[{name:"show",rawName:"v-show",value:"bpq"===t.category,expression:"category === 'bpq'"}],attrs:{device:t.device},on:{sendData:t.sendCmd}}),n("DefaultBtnBox",{directives:[{name:"show",rawName:"v-show",value:"default"===t.category,expression:"category === 'default'"}],attrs:{device:t.device},on:{sendData:t.sendCmd}}),n("ProtocolBtn",{attrs:{protocol:t.protocol}})],1),t.things.length>0?n("el-row",{attrs:{gutter:5}},t._l(t.things,(function(e){return n("el-col",{key:e.name,staticStyle:{"margin-bottom":"8px"},attrs:{xs:24,sm:12,md:8,lg:6,xl:6}},[n("el-card",{class:"box-card "+t.runClass,style:"border-color: "+t.theme+";",attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"thing_name"},[t._v(t._s(e.title)),e.unit?n("span",{staticClass:"thing_unit"},[t._v("("+t._s(e.unit)+")")]):t._e()])]),n("el-container",{staticClass:"thing_body"},[n("el-main",[n("div",{staticClass:"thing_value",attrs:{id:e.name}},[t._v("--")]),n("div",{staticClass:"update_time",attrs:{id:"update_"+e.name}})]),e.icon?n("div",{attrs:{width:"50px"}},[n("svg-icon",{staticStyle:{"font-size":"50px"},attrs:{"icon-class":e.icon}})],1):t._e()],1)],1)],1)})),1):n("el-empty",{attrs:{description:"无物模型"}})],1)},i=[],o=(n("d81d"),n("b0c0"),n("ac1f"),n("00b4"),n("4de4"),n("d3b7"),n("a6e8")),s=n("5a0c"),r=n.n(s),l=n("8bdb"),c=n("8487"),u=n("27de"),d={components:{DefaultBtnBox:l["default"],BpqBtnBox:c["default"],ProtocolBtn:u["default"]},props:{device:{type:Object},data:{type:Object},env:{type:Object,default:function(){return{}}},protocol:String},computed:{theme:function(){return this.$store.state.settings.theme}},data:function(){return{runClass:"",cThing:{},things:[],category:void 0}},created:function(){this.animation()},methods:{reload:function(){var t=this;this.things.map((function(e){var n=Object(o["d"])(t.data,e.name,void 0),a=document.getElementById("update_"+e.name),i=document.getElementById(e.name);n&&a&&i&&(n.value||0===n.value)&&(/alink_ignore_.+/.test(n.value)?(console.log(e.name+":"+n.value),i.innerText="失败"):(a.innerText=r()(1e3*n.ts).format("YYYY-MM-DD HH:mm:ss"),i.innerText=n.value))}))},sendCmd:function(t,e){this.$emit("sendData",t,e)},animation:function(){var t=this;t.runClass="horse_run",setTimeout((function(){}),3500)}},watch:{device:function(){var t=this.device.product;this.category=t.category,this.things=t.thing.filter((function(t){return"rw"===t.access||"read"===t.access}))},data:function(){this.reload()}}},m=d,p=(n("a855"),n("2877")),f=Object(p["a"])(m,a,i,!1,null,"8e686d12",null);e["default"]=f.exports},d5c6:function(t,e,n){"use strict";n("10e4")},e6fa:function(t,e,n){}}]);