(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ac012ea","chunk-5f53121e","chunk-4d2869f2"],{"3ea5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"video-container"}}),i("el-row",{staticClass:"thingBox",style:t.style},t._l(t.things,(function(e){return i("el-col",{key:e.name,attrs:{span:12,id:"box_"+e.name}},[i("div",{staticClass:"thing_name"},[i("div",{staticClass:"thing_value",attrs:{id:e.name}},[t._v("--")])]),"alarmType"===e.name?i("div",{staticClass:"update_time",attrs:{id:"update_"+e.name}}):t._e()])})),1)],1)},n=[],d=(i("b64b"),i("4de4"),i("d3b7"),i("b0c0"),i("d81d"),i("c38d")),c=i.n(d),o=i("5a98"),r=i("a6e8"),s=i("5a0c"),u=i.n(s),v={components:{},props:{device:{type:Object},data:{type:Object},env:{type:Object,default:function(){return{}}}},data:function(){return{things:[],width:600,height:400,style:""}},mounted:function(){var t=this,e={addr:this.device.addr};Object(o["c"])(e).then((function(e){var i=e.data;i.config=JSON.parse(i.config),t.createEZPlayer("video-container",t.width,t.height,i)}))},created:function(){this.things=this.device.product.thing,this.env.width&&(this.width=this.env.width,this.height=4*this.env.width/6),this.style="width: "+this.width+"px;"},methods:{createEZPlayer:function(t,e,i,a){var n=a.config.filter((function(t){return"device_serial"===t.name}));new c.a.EZUIKitPlayer({id:t,accessToken:a.accessToken,url:"ezopen://open.ys7.com/"+n[0].value+"/1.hd.live",template:"security",audio:0,width:e,height:i})},formatTitle:function(t,e){if("alarmType"!==t){if("pictureList"===t){var i=JSON.parse(e),a="";return i.map((function(t){a+='<img style="width: 100%; padding:5px;" src="'+t+'"/>'})),a}return e}switch(e){case"motiondetect":return'<i class="el-icon-message-solid"></i>移动侦测';default:return e}},reload:function(){var t=this;this.things.map((function(e){var i=Object(r["d"])(t.data,e.name,"--"),a=document.getElementById(e.name);(i.value||0===i.value)&&(a.innerHTML=t.formatTitle(e.name,i.value));var n=document.getElementById("update_"+e.name);n&&(n.innerText=u()(1e3*i.ts).format("YYYY-MM-DD HH:mm:ss"))}))}},watch:{device:function(){this.things=this.device.product.thing},data:function(){this.reload()}}},l=v,h=(i("e64e"),i("2877")),p=Object(h["a"])(l,a,n,!1,null,"89896212",null);e["default"]=p.exports},"7a56":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("MqttBoard",{attrs:{subscription:t.subscription,publish:t.publish},on:{doMqttMessage:t.doMqttMessage}}),i("DevicePannel",{attrs:{recvData:t.recvData,devId:t.devId,env:t.env,protocol:t.protocol},on:{onload:t.onLoad,send:t.doSend}})],1)},n=[],d=(i("a9e3"),i("e9c4"),i("b64b"),i("fb77")),c=i("d4c0"),o={components:{MqttBoard:d["a"],DevicePannel:c["default"]},props:{devId:{type:[String,Number]},env:{type:Object,default:function(){return{}}}},data:function(){return{device:void 0,product:void 0,subscription:{},publish:{},recvData:void 0,protocol:""}},created:function(){},methods:{doSend:function(t,e){var i={msgType:"control_device",data:{type:"write",addr:this.device.addr,name:t,value:e}};this.publish={topic:"p/in",qos:0,payload:JSON.stringify(i)},this.$modal.msgSuccess("发送成功!")},onLoad:function(t){console.log("this.device",t),this.device=t,this.$emit("deviceChange",this.device),this.product=t.product,this.protocol=this.product.protocol,this.subscription={topic:"p/out/"+t.addr,qos:0}},doMqttMessage:function(t,e){var i=JSON.parse(e);this.recvData=i}}},r=o,s=i("2877"),u=Object(s["a"])(r,a,n,!1,null,"09ef4578",null);e["default"]=u.exports},bf35:function(t,e,i){},d4c0:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.product&&"ezviz"===t.product.category?i("CameraBox",{attrs:{device:t.device,data:t.devData,env:t.env}}):i("DefaultBox",{attrs:{device:t.device,data:t.devData,env:t.env,protocol:t.protocol},on:{sendData:t.sendData}})],1)},n=[],d=(i("a9e3"),i("b64b"),i("5a98")),c=(i("870c"),i("3ea5")),o=i("c7e7"),r={components:{DefaultBox:o["default"],CameraBox:c["default"]},props:{devId:{type:[String,Number]},recvData:{type:Object,default:function(){}},env:{type:Object,default:function(){return{}}},protocol:String},data:function(){return{loading:!1,device:void 0,product:void 0,devData:void 0}},created:function(){this.queryDevice()},methods:{queryDevice:function(){var t=this;this.loading=!0,Object(d["g"])("device",this.devId).then((function(e){var i=e.data,a=i.product;a?(i.product=void 0,Object(d["g"])("product",a).then((function(e){var a=e.data;a.thing?a.thing=JSON.parse(a.thing):a.thing=[],t.product=a,i.product=a,t.device=i,t.loadAfter()}))):(t.device=i,t.loadAfter())}))},loadAfter:function(){var t=this;this.loading=!1,this.$emit("onload",this.device),Object(d["e"])({addr:this.device.addr}).then((function(e){var i={},a=e.data;for(var n in a)i[n]={ts:a.createtime,value:a[n]};t.devData=i}))},sendData:function(t,e){this.$emit("send",t,e)}},watch:{devId:function(){this.queryDevice()},recvData:function(){this.devData=this.recvData}}},s=r,u=i("2877"),v=Object(u["a"])(s,a,n,!1,null,"482d754d",null);e["default"]=v.exports},e64e:function(t,e,i){"use strict";i("bf35")}}]);