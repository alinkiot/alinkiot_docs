(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c1d6cab"],{7803:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:"register "+e.sideTheme,style:e.bgCss},[r("theme-picker",{staticStyle:{visibility:"hidden",width:"0px"}}),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadInfo,expression:"loadInfo"}],ref:"registerForm",staticClass:"register-form",style:"background-color:"+e.bgColor+";color:"+e.hdColor,attrs:{model:e.registerForm,rules:e.registerRules}},[r("div",{staticStyle:{"margin-bottom":"10px"}},[r("div",{staticStyle:{width:"20%",display:"inline-block"}},[e.logo?r("el-image",{staticClass:"logo-img",attrs:{src:e.logo}},[r("el-image",{staticClass:"logo-img",attrs:{slot:"error",src:e.defLogo},slot:"error"})],1):e._e()],1),r("div",{staticClass:"title"},[e._v(e._s(e.title))])]),r("el-button",{staticClass:"reg-title",attrs:{type:"text"}},[e._v("用户注册")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off","show-password":!0,placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRegister(t)}},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"确认密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRegister(t)}},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),e.captchaEnabled?r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRegister(t)}},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),r("div",{staticClass:"register-code"},[r("img",{staticClass:"register-code-img",attrs:{src:e.codeUrl},on:{click:e.getSiteInfo}})])],1):e._e(),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e.loading?r("span",[e._v("注 册 中...")]):r("span",[e._v("注 册")])]),r("div",{staticStyle:{float:"right","margin-top":"10px"}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goLogin({})}}},[e._v("返回登录")])],1)],1)],1),r("div",{staticClass:"el-register-footer"},[r("span",[e._v(e._s(e.copyright))])])],1)},o=[],i=r("c7eb"),a=r("1da1"),n=r("7ded"),l=r("b18f"),c={name:"Register",components:{ThemePicker:l["a"]},computed:{theme:function(){return this.$store.state.settings.theme},sideTheme:function(){return this.$store.state.settings.sideTheme},bgColor:function(){return this.$store.state.settings.headerBgColor},hdColor:function(){return this.$store.state.settings.rightToolbarColor}},data:function(){var e=this,t=function(t,r,s){e.registerForm.password!==r?s(new Error("两次输入的密码不一致")):s()};return{title:"物联网管理后台",defLogo:r("81a5"),logo:void 0,bgCss:"",codeUrl:"",registerForm:{username:"",password:"",confirmPassword:"",code:"",uuid:""},registerRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:t,trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},loadInfo:!1,loading:!1,copyright:"",captchaEnabled:!0}},created:function(){this.getSiteInfo()},methods:{goLogin:function(e){var t="/login";this.$route.params.project&&(t="/"+this.$route.params.project+"/login"),this.$router.push({path:t,query:e})},getSiteInfo:function(){var e=this;return Object(a["a"])(Object(i["a"])().mark((function t(){var r,s,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadInfo=!0,r=e.$route.params.project,t.next=4,e.$store.dispatch("settings/SiteInfo",r);case 4:s=t.sent,s.background&&""!==s.background?(o=s.background,e.bgCss="backgroundImage: url('"+o+"'), url('/images/login-background.jpg');"):e.bgCss="backgroundImage: url('/images/login-background.jpg');",e.logo=s.logo?s.logo:e.defLogo,e.title=s["site_title"]?s["site_title"]:"物联网管理后台",e.copyright=s.copyright,e.captchaEnabled=s.captchaEnabled,e.captchaEnabled&&(e.codeUrl="data:image/gif;base64,"+s.img,e.registerForm.uuid=s.uuid),e.loadInfo=!1;case 12:case"end":return t.stop()}}),t)})))()},handleRegister:function(){var e=this;this.$refs.registerForm.validate((function(t){t&&(e.loading=!0,Object(n["d"])(e.registerForm).then((function(t){var r=e.$route.query,s=e.registerForm.username;e.$alert("<font color='red'>恭喜你，您的账号 "+s+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then((function(){e.goLogin(r)})).catch((function(){}))})).catch((function(){e.loading=!1,e.captchaEnabled&&e.getSiteInfo()})))}))}}},g=c,u=(r("f7ec"),r("2877")),d=Object(u["a"])(g,s,o,!1,null,null,null);t["default"]=d.exports},e6ae:function(e,t,r){},f7ec:function(e,t,r){"use strict";r("e6ae")}}]);